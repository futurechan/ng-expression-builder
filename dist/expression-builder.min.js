angular.module("expression-builder",["ui.bootstrap"]).controller("ExpressionBuilderController",["$scope",function(o){o.addCondition=function(){o.conditions.push({})},o.addGroup=function(){o.conditions.push({conditions:[]})},o.remove=function(e){var n=o.conditions.indexOf(e);o.removeAt(n)},o.removeAt=function(e){o.conditions.splice(e,1)},o.getLeftOperands=function(e){return o.leftOperandProvider?o.leftOperandProvider(e):[]},o.getRightOperands=function(e){return o.rightOperandProvider?o.rightOperandProvider(e):[]}}]).directive("expressionBuilder",["$compile",function(o){return{restrict:"EA",controller:"ExpressionBuilderController",templateUrl:"templates/expressionbuilder.html",scope:{conditions:"=",booleanOperators:"=?",comparisonOperators:"=?",leftOperandProvider:"&",rightOperandProvider:"&"},compile:function(e){var n,r=e.contents().remove();return function(e,i){angular.isUndefined(n)&&(n=o(r)),n(e,function(o){i.append(o)}),void 0===e.booleanOperators&&(e.booleanOperators=["AND","OR","XOR"]),void 0===e.comparisonOperators&&(e.comparisonOperators=["=","<>","<","<=",">",">="]),e.leftOperandProvider&&(e.leftOperandProvider=e.leftOperandProvider()),e.rightOperandProvider&&(e.rightOperandProvider=e.rightOperandProvider())}}}}]),angular.module("expression-builder").run(["$templateCache",function(o){o.put("templates/expressionbuilder.html",'<div class=condition-builder><div ng-repeat="c in conditions"><div ng-if="$index != 0" class="form-inline bool-op"><select class="form-control input-sm" ng-options="o as o for o in booleanOperators" ng-model=c.bool></select></div><div ng-if=c.conditions class=condition-group><div class=pull-right><button class="btn btn-danger btn-sm" ng-click=removeAt($index)>&times;</button></div><expression-builder conditions=c.conditions boolean-operators=booleanOperators comparison-operators=comparisonOperators left-operand-provider=leftOperandProvider right-operand-provider=rightOperandProvider></expression-builder></div><div ng-if=!c.conditions class=form-inline><div class=form-group-sm><input class=form-control ng-model=c.leftOperand placeholder="Left Operand" typeahead="operand for operand in getLeftOperands($viewValue)"><select class=form-control ng-model=c.comparison ng-options="o as o for o in comparisonOperators"></select><input class=form-control ng-model=c.rightOperand placeholder="Right Operand" typeahead="operand for operand in getRightOperands($viewValue)"> <button class="btn btn-danger btn-sm" ng-click=removeAt($index)>&times;</button></div></div></div><div class=condition-group-button-row><button class="btn btn-success btn-sm" ng-click=addCondition()>Add Condition</button> <button class="btn btn-success btn-sm" ng-click=addGroup()>Add Group</button></div></div>')}]);