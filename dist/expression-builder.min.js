angular.module("expression-builder",["ui.bootstrap"]).controller("ExpressionBuilderController",["$scope",function(n){n.addCondition=function(){n.conditions.push({})},n.addGroup=function(){n.conditions.push({conditions:[]})},n.remove=function(o){var e=n.conditions.indexOf(o);n.removeAt(e)},n.removeAt=function(o){n.conditions.splice(o,1)},n.getLeftOperands=function(o){return n.leftOperandProvider?n.leftOperandProvider(o):[]},n.getRightOperands=function(o){return n.rightOperandProvider?n.rightOperandProvider(o):[]}}]).directive("expressionBuilder",["$compile",function(n){return{restrict:"EA",controller:"ExpressionBuilderController",templateUrl:"templates/expressionbuilder.html",scope:{conditions:"=",booleanOperators:"=?",comparisonOperators:"=?",leftOperands:"=?",leftOperandProvider:"&",rightOperands:"=?",rightOperandProvider:"&"},compile:function(o){var e,r=o.contents().remove();return function(o,i){angular.isUndefined(e)&&(e=n(r)),e(o,function(n){i.append(n)}),void 0===o.booleanOperators&&(o.booleanOperators=["AND","OR","XOR"]),void 0===o.comparisonOperators&&(o.comparisonOperators=["=","<>","<","<=",">",">=","[]","![]"]),o.left&&o.leftOperandProvider&&(o.leftOperandProvider=o.leftOperandProvider()),o.rightOperandProvider&&(o.rightOperandProvider=o.rightOperandProvider())}}}}]),angular.module("expression-builder").run(["$templateCache",function(n){n.put("templates/expressionbuilder.html",'<div class=condition-builder><div ng-repeat="c in conditions"><div ng-if="$index != 0" class="form-inline bool-op"><select class="form-control input-sm" ng-options="o as o for o in booleanOperators" ng-model=c.bool></select></div><div ng-if=c.conditions class=condition-group><div class=pull-right><button class="btn btn-danger btn-sm" ng-click=removeAt($index)>&times;</button></div><expression-builder conditions=c.conditions boolean-operators=booleanOperators comparison-operators=comparisonOperators left-operands=leftOperands left-operand-provider=leftOperandProvider right-operands=rightOperands right-operand-provider=rightOperandProvider></expression-builder></div><div ng-if=!c.conditions class=form-inline><div class=form-group-sm><select class=form-control ng-if=leftOperands ng-model=c.leftOperand ng-options="operand for operand in leftOperands"></select><input class=form-control ng-if=!leftOperands ng-model=c.leftOperand placeholder="Left Operand" typeahead="operand for operand in getLeftOperands($viewValue)"><select class=form-control ng-model=c.comparison ng-options="o as o for o in comparisonOperators"></select><select class=form-control ng-if=rightOperands ng-model=c.rightOperand ng-options="operand for operand in rightOperands"></select><input class=form-control ng-if=!rightOperands ng-model=c.rightOperand placeholder="Right Operand" typeahead="operand for operand in getRightOperands($viewValue)"> <button class="btn btn-danger btn-sm" ng-click=removeAt($index)>&times;</button></div></div></div><div class=condition-group-button-row><button class="btn btn-default btn-sm" ng-click=addCondition()><span class="glyphicon glyphicon-plus-sign"></span> Add Condition</button> <button class="btn btn-default btn-sm" ng-click=addGroup()><span class="glyphicon glyphicon-plus-sign"></span> Add Group</button></div></div>')}]);